import{C as N,a as I,S as C,i as O,b as B}from"./CardWithInfo.5a6675cc.js";import{H as M,L as j,y as m,E as i,o as r,g as a,d as e,n as h,a as n,w as l,t as u,F as g,x,e as c,c as E,G as P,I as V}from"./app.2d681f50.js";import{b as H,_ as z,a as A}from"./ResponsiveNavLink.572c6d5a.js";import{A as T}from"./ApplicationLogo.9d474a50.js";import{_ as U}from"./_plugin-vue_export-helper.cdc0426e.js";import"./Stars.b91a231a.js";const q={name:"IndexExpl",components:{CardWithInfo:N,Card:I,Head:M,Link:j,ResponsiveNavLink:H,ApplicationLogo:T,DropdownLink:z,Dropdown:A,SearchBar:C,VueHorizontal:O,Slider:B},props:{results:{type:Object,default:()=>({})},recommendations:{type:Object,default:()=>({})},favourites:{type:Object,default:()=>({})}},data(){return{showingNavigationDropdown:!1,search:"",atTopOfPage:!0,allResults:[]}},beforeMount(){window.needsReload&&(m.Inertia.reload(),window.needsReload=!1),window.addEventListener("scroll",this.handleScroll);let o=window.location.search.substring(1),d=new URLSearchParams(o).get("query");d&&(this.search=d)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},methods:{updateSearch(o){this.search=o},openRecipe(o){m.Inertia.get("/recipes/"+o.id)},handleScroll(){this.atTopOfPage=window.scrollY<=0,this.search&&window.innerHeight+window.scrollY+200>document.body.scrollHeight&&this.loadMore()},loadMore(){this.results.next_page_url!==null&&this.$inertia.get(this.results.next_page_url,{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.allResults=[...this.allResults,...this.results.data]}})}},watch:{search(o){m.Inertia.get("/recipes",{query:o},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.allResults=this.results.data}})}}},p=o=>(P("data-v-c98ce281"),o=o(),V(),o),F=p(()=>e("head",{title:"Dashboard"},null,-1)),Y={class:"min-h-screen bg-gray-100"},G={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},W={class:"flex justify-between h-16"},J={class:"flex"},K={class:"shrink-0 flex items-center"},Q={class:"my-auto w-full mx-6"},X={class:"hidden sm:flex sm:items-center sm:ml-6"},Z={class:"ml-3 relative"},$={class:"inline-flex rounded-md"},ee={type:"button",class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-gray-500 bg-white hover:text-gray-700 focus:outline-none transition ease-in-out duration-150"},oe=p(()=>e("svg",{class:"ml-2 -mr-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)),te={class:"-mr-2 flex items-center sm:hidden"},se={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},ne={class:"pt-4 pb-1 border-t border-gray-200"},ie={class:"px-4"},re={class:"font-medium text-base text-gray-800"},ae={class:"font-medium text-sm text-gray-500"},le={class:"mt-3 space-y-1"},de={class:"pt-16 pb-12"},ce={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},he={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ue={key:0},pe=p(()=>e("h1",{class:"text-xl text-grey m-4 font-bold"},"Recommended for you",-1)),_e={class:"grid md:grid-cols-2 xl:grid-cols-3 gap-1 mx-6"},me={key:1},ge=p(()=>e("h1",{class:"text-xl text-grey m-4 font-bold"},"Search results",-1)),fe=["onClick"],ve=["src"],we={class:"my-auto ml-4 font-semibold"};function xe(o,d,f,be,t,_){const b=i("ApplicationLogo"),y=i("Link"),k=i("SearchBar"),v=i("DropdownLink"),S=i("Dropdown"),w=i("ResponsiveNavLink"),L=i("Slider"),R=i("card-with-info");return r(),a(g,null,[F,e("div",null,[e("div",Y,[e("nav",{class:h(["bg-white border-b border-gray-100 fixed z-50 w-full",{scrolled:!t.atTopOfPage}])},[e("div",G,[e("div",W,[e("div",J,[e("div",K,[n(y,{href:o.route("recipes.index")},{default:l(()=>[n(b,{class:"block h-9 w-auto fill-current text-gray-800"})]),_:1},8,["href"])])]),e("div",Q,[n(k,{value:t.search,onUpdatedValue:_.updateSearch},null,8,["value","onUpdatedValue"])]),e("div",X,[e("div",Z,[n(S,{align:"right",width:"48"},{trigger:l(()=>[e("span",$,[e("button",ee,[c(u(o.$page.props.auth.user.name)+" ",1),oe])])]),content:l(()=>[n(v,{href:o.route("profile.edit")},{default:l(()=>[c(" Profile ")]),_:1},8,["href"]),n(v,{href:o.route("logout"),method:"post",as:"button"},{default:l(()=>[c(" Log Out ")]),_:1},8,["href"])]),_:1})])]),e("div",te,[e("button",{onClick:d[0]||(d[0]=s=>t.showingNavigationDropdown=!t.showingNavigationDropdown),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"},[(r(),a("svg",se,[e("path",{class:h({hidden:t.showingNavigationDropdown,"inline-flex":!t.showingNavigationDropdown}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),e("path",{class:h({hidden:!t.showingNavigationDropdown,"inline-flex":t.showingNavigationDropdown}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),e("div",{class:h([{block:t.showingNavigationDropdown,hidden:!t.showingNavigationDropdown},"sm:hidden"])},[e("div",ne,[e("div",ie,[e("div",re,u(o.$page.props.auth.user.name),1),e("div",ae,u(o.$page.props.auth.user.email),1)]),e("div",le,[n(w,{href:o.route("profile.edit")},{default:l(()=>[c(" Profile ")]),_:1},8,["href"]),n(w,{href:o.route("logout"),method:"post",as:"button"},{default:l(()=>[c(" Log Out ")]),_:1},8,["href"])])])],2)],2),e("main",null,[e("div",de,[e("div",ce,[e("div",he,[t.search?(r(),a("div",me,[ge,(r(!0),a(g,null,x(t.allResults,s=>(r(),a("div",{class:"flex h-20 border-b-2 border-grey cursor-pointer",onClick:D=>_.openRecipe(s)},[e("img",{src:s.image_url,alt:"Recipe picture",class:"w-20 object-cover"},null,8,ve),e("h1",we,u(s.name),1)],8,fe))),256))])):(r(),a("div",ue,[n(L,{data:f.favourites.data,text:"Your Favourites"},null,8,["data"]),pe,e("div",_e,[(r(!0),a(g,null,x(f.recommendations.data,s=>(r(),E(R,{name:s.name,"image-recipe":s.image_url,"image-graf":s.pivot.image_url,score:0,perc:s.pivot.certainty,id:s.id,onOpenRecipe:D=>_.openRecipe(s)},null,8,["name","image-recipe","image-graf","perc","id","onOpenRecipe"]))),256))])]))])])])])])])],64)}const Ne=U(q,[["render",xe],["__scopeId","data-v-c98ce281"]]);export{Ne as default};
